<!-- MHonArc v2.4.3 -->
<!--X-Subject: Re: Pentium optimizations for DES (BIG) -->
<!--X-From-R13: v.nz.abg.n.ahzoreNorfg.pbz -->
<!--X-Date: Wed, 15 Jan 1997 00:12:24 &#45;0800 (PST) -->
<!--X-Message-Id: 3.0.32.19700101000000.006b58b8@best.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Re: Pentium optimizations for DES (BIG)</TITLE>
<LINK REV="made" HREF="mailto:i.am.not.a.number@best.com">
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg01675.html">Date Prev</A>][<A HREF="msg01666.html">Date Next</A>][<A HREF="msg01577.html">Thread Prev</A>][<A HREF="msg01598.html">Thread Next</A>][<A HREF="index.html#01656">Date Index</A>][<A HREF="threads.html#01656">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: Pentium optimizations for DES (BIG)</H1>
<HR>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<UL>
<LI><em>To</em>: <A HREF="mailto:trei@process.com">trei@process.com</A>, <A HREF="mailto:cypherpunks@toad.com">cypherpunks@toad.com</A></LI>
<LI><em>Subject</em>: Re: Pentium optimizations for DES (BIG)</LI>
<LI><em>From</em>: <A HREF="mailto:i.am.not.a.number@best.com">i.am.not.a.number@best.com</A></LI>
<LI><em>Date</em>: Wed, 15 Jan 1997 00:28:30 -0800</LI>
<LI><em>Cc</em>: <A HREF="mailto:trei@toad.com">trei@toad.com</A></LI>
<LI><em>Sender</em>: <A HREF="mailto:owner%2Dcypherpunks@toad.com">owner-cypherpunks@toad.com</A></LI>
</UL>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
here is Mikkelson's macro, with a few cycles shaved.
on my machine there is a small but measurable improvement.


DesRound	macro RoundNo,reg1,reg2

		mov	eax,		DWORD PTR (RoundNo*8) [ebp]
		xor	ebx,		ebx

		mov	edx,		DWORD PTR (RoundNo*8+4) [ebp]

		xor	eax,		reg1
		xor	edx,		reg1

		and	eax,		0fcfcfcfch
		mov	bl,		al
		and	edx,		0cfcfcfcfh
		mov	cl,		ah
		ror	edx,		4
		xor	reg2,		DWORD PTR _des_SPtrans[ebx]
		mov	bl,		dl

		xor	reg2,		DWORD PTR _des_SPtrans[0200h+ecx]
		mov	cl,			dh
		shr	eax,		16

		xor	reg2,		DWORD PTR _des_SPtrans[0100h+ebx]

		mov	bl,		ah
		shr	edx,		16

		xor	reg2,		DWORD PTR _des_SPtrans[0300h+ecx]

		mov	cl,		dh
		and	eax,		0FFh
		and	edx,		0FFh

		xor	reg2,		DWORD PTR _des_SPtrans[0600h+ebx];ebx
		mov				ebx,DWORD PTR _des_SPtrans[0700h+ecx]
		xor	reg2,		ebx
		mov				ebx,DWORD PTR _des_SPtrans[0400h+eax]
		xor	reg2,		ebx
		mov				ebx,DWORD PTR _des_SPtrans[0500h+edx]
		xor	reg2,		ebx

		endm

At 10:19 AM 1/14/97 -6, Peter Trei wrote:
&gt;I hope you'll look at Svend Olaf Mikkleson's
&gt;latest DES round replacement for libdes. He
&gt;seems to have gotten the round down to 18
&gt;clock cycles. I have not yet had a chance
&gt;to try it myself.
&gt;
&gt;see: <A  HREF="http://inet.uni-c.dk/~svolaf/des.htm">http://inet.uni-c.dk/~svolaf/des.htm</A>
&gt;
&gt;Peter Trei
&gt;trei@process.com
&gt;
&gt;Peter Trei
&gt;Senior Software Engineer
&gt;Purveyor Development Team                                
&gt;Process Software Corporation
&gt;<A  HREF="http://www.process.com">http://www.process.com</A>
&gt;trei@process.com
&gt;
&gt;

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg01675.html">Re: Airport security [no such thing]</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg01666.html">Positions open</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg01577.html">Re: Pentium optimizations for DES (BIG)</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg01598.html">a cool place to crash</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#01656"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#01656"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
