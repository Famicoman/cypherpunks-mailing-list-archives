<!-- MHonArc v2.4.3 -->
<!--X-Subject: Re: ipnat problems continued -->
<!--X-From-R13: hx1bNem.hav&#45;xneyfehur.qr -->
<!--X-Date: Wed, 15 Oct 1997 08:57:24 &#45;0700 (PDT) -->
<!--X-Message-Id: 199710151308.HAA03204@mroe.cs.colorado.edu -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: l03110706b06b487e1e49@[206.142.16.66] -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Re: ipnat problems continued</TITLE>
<LINK REV="made" HREF="mailto:uk1o@rz.uni-karlsruhe.de">
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00785.html">Date Prev</A>][<A HREF="msg00790.html">Date Next</A>][<A HREF="msg01825.html">Thread Prev</A>][<A HREF="msg00763.html">Thread Next</A>][<A HREF="index.html#01817">Date Index</A>][<A HREF="threads.html#01817">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: ipnat problems continued</H1>
<HR>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<UL>
<LI><em>To</em>: <A HREF="mailto:patton@sysnet.net">patton@sysnet.net</A> (Matthew Patton)</LI>
<LI><em>Subject</em>: Re: ipnat problems continued</LI>
<LI><em>From</em>: <A HREF="mailto:uk1o@rz.uni%2Dkarlsruhe.de">uk1o@rz.uni-karlsruhe.de</A></LI>
<LI><em>Date</em>: Wed, 15 Oct 1997 14:38:21 +0200 (CES)</LI>
<LI><em>Cc</em>: <A HREF="mailto:misc@openbsd.org">misc@openbsd.org</A></LI>
<LI><em>In-Reply-To</em>: &lt;<A HREF="msg01825.html">l03110706b06b487e1e49@[206.142.16.66]</A>&gt; from Matthew Patton at "Oct 16, 97 00:35:53 am"</LI>
<LI><em>Sender</em>: <A HREF="mailto:owner%2Dcypherpunks@toad.com">owner-cypherpunks@toad.com</A></LI>
</UL>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Hello!

According to Matthew Patton:
&gt; I've tried varios purmutations of the map rules to no positive effect.
&gt; map ppp0 192.168.1.0/24 -&gt; 206.142.xx.yy/32 portmap tcp/udp 10000:20000
&gt; repeat except substitute   ^^^^^^^^^^^^^ with 0.0.0.0 or ppp0. Neither works.

&gt; I ran tcpdump on ppp0 on the gateway and sure enough, the box is sending
&gt; down the modem link 192.168.1.10 (the particular LAN host trying to
&gt; initiate an outside connection) as the source IP. Now if everything were
&gt; correct shouldn't it be the IP addr of the local end of the PPP link as
&gt; hosted on the gateway box? (ie 206.142.xx.yy)

&gt; ipnat -l has never once shown any indication of active connections.
&gt; Either nat is seriosly not working under stock v2.1 (anyone prove it does
&gt; work?) or there are some undocumented and not exactly obvios dependencies
&gt; with regard to kernel options.

Do you have
  option IPFILTER
and perhaps
  option IPFILTER_LOG
set?

&gt; [...]

&gt; BTW, how come kernal option IPNAT isn't documented ANYWHERE? It's not even
&gt; in the ALL file.

Because it's integrated with the IPFILTER (option IPFILTER).

Besides: ipnat(1), ipnat(4), ipnat(5)...

Regards, Felix.

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="01825" HREF="msg01825.html">ipnat problems continued</A></STRONG>
<UL><LI><EM>From:</EM> Matthew Patton &lt;patton@sysnet.net&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00785.html">Puerile Forgery (was: Re: Cole Harbor Students)</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00790.html">Re: Security flaw in PGPverify of INN (fwd)</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg01825.html">ipnat problems continued</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00763.html">Technical Description of PGP 5.5</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#01817"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#01817"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
