<!-- MHonArc v2.4.3 -->
<!--X-Subject: Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux] -->
<!--X-From-R13: [nex [heenl <znexNtebaqne.mn> -->
<!--X-Date: Wed, 1 Nov 1995 02:48:07 +0800 -->
<!--X-Message-Id: 199510311715.TAA05821@grumble.grondar.za -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</TITLE>
<LINK REV="made" HREF="mailto:mark@grondar.za">
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00223.html">Date Prev</A>][<A HREF="msg00224.html">Date Next</A>][<A HREF="msg00219.html">Thread Prev</A>][<A HREF="msg00241.html">Thread Next</A>][<A HREF="index.html#00261">Date Index</A>][<A HREF="threads.html#00261">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</H1>
<HR>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<UL>
<LI><em>To</em>: "Theodore Ts'o" &lt;<A HREF="mailto:tytso@MIT.EDU">tytso@MIT.EDU</A>&gt;</LI>
<LI><em>Subject</em>: Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux] </LI>
<LI><em>From</em>: Mark Murray &lt;<A HREF="mailto:mark@grondar.za">mark@grondar.za</A>&gt;</LI>
<LI><em>Date</em>: Tue, 31 Oct 1995 19:15:35 +0200</LI>
<LI><em>Cc</em>: <A HREF="mailto:cypherpunks@toad.com">cypherpunks@toad.com</A></LI>
<LI><em>Sender</em>: <A HREF="mailto:owner%2Dcypherpunks@toad.com">owner-cypherpunks@toad.com</A></LI>
</UL>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
&gt;    How about SetGID? We were going for 660 root.kmem.
&gt; 
&gt; Bad idea; anyone who can run PGP could then get instant access to kmem

Fooey. Of course. Scratch that plan.

&gt; 	cd /tmp
&gt; 	ln -s /dev/kmem foo
&gt; 	pgp -e tytso foo
&gt; 	rm foo
&gt; 	pgp foo.pgp

Eeeeek!

&gt;    ? "Gut feel" suggests to me that large ammounts of "predicted" input might
&gt;    be worse than the normal sort of system noise you have been using.
&gt; 
&gt; But keep in mind that what we're doing is XOR'ing the input data into
&gt; the pool.  (Actually, it's a bit more complicated than that.  The input
&gt; is XOR'ed in with a CRC-like function, generated by taking an
&gt; irreducible polynomial in GF(2**128).  But for the purposes of this
&gt; argument, you can think of it as XOR.)  So since you don't know what the
&gt; input state of the pool is, you won't know what the output state of the
&gt; pool.

I chatted with a colleague at work, and he helped bend my mind right.
I had the mistaken notion that adding lots of data would "overflow"
and "dilute" the entropy to an attackable state.

&gt;    Is this millisecond accuracy quantifiable in terms of bits of entropy?
&gt;    if so, the ethernet is surely safe?
&gt; 
&gt; Well, no.  If you're only using as your timing the 100Hz clock, the
&gt; adversary will have a better timebase than you do.  So you may be adding
&gt; zero or even no bits of entropy which can't be deduced by the adversary.

In a 386 or a 486 (under FreeBSD at least) there is a 1Mhz clock available.
How would _this_ be? On the Pentium there is the &lt;whatsit?&gt; register
which will give the board's oscillator (or 90 MHz) I believe.

&gt; This is even worse in the PGP keyboard timing case, since the adversary
&gt; almost certainly can find a better time resolution to measure your
&gt; incoming packets when compared to the timing resolution that most
&gt; programs have.  Far too many Unix systems only make a 100Hz clock
&gt; available to the user mode, even if you have a better quality high
&gt; resolution timing device in the kernel (for example, the Pentium cycle
&gt; counting register).

Ah yes - _that_ register. :-)

What then is a body to do? Preserve all _verifiable_ randomness like gold?
Dish it out under some quota? A denial of service attack would be

forever {
	cat /dev/random &gt; /dev/null
}

Severely limiting most decent folk's chance at getting PGP to work.

Right now I am considering making a piece of cheap hardware to deliver
noise to a digital input. (Electronics is a stagnant hobby of mine)
Interested? I may knock up a prototype in a month or so...

&gt; The problem is that in order to do this requires making assumptions
&gt; about what the capabilities of your adversary are.  Not only does this
&gt; change over time, but certain adversaries (like the NSA) make it their
&gt; business to conceal their capabilities, for precisely this reason.

Can they predict thermal noise in a cheap transistor? ]:-&gt;

&gt; So I like to be conservative and use limits which are imposed by the
&gt; laws of physics, as opposed to the current level of technology.  Hence,
&gt; if the packet arrival time can be observed by an outsider, you are at
&gt; real risk in using the network interrupts as a source of entropy.
&gt; Perhaps it requires buidling a very complicated model of how your Unix
&gt; scheduler works, and how much time it takes to process network packets,
&gt; etc.  ---- but I have to assume that an adversary can very precisely
&gt; model that, if they were to work hard enough at it.

This is a strong argument for some form of specialised noise source.
I have read of methods of getting this from turbulent air flow in a hard
drive (an RFC, I believe).

&gt; People may disagree as to whether or not this is possible, but it's not
&gt; prevented by the laws of physics; merely by how much effort someone
&gt; might need to put in to be able to model a particular operating system's
&gt; networking code.  In any case, that's why I don't like depending on
&gt; network interrupts.  Your paranoia level may vary.

If I was running Fort Knox, I'd probably use Radioactive decay...

(From my experience working at a cyclotron facility - these SOB's are
_*RANDOM*_)

M
--
Mark Murray
46 Harvey Rd, Claremont, Cape Town 7700, South Africa
+27 21 61-3768 GMT+0200
Finger mark@grumble.grondar.za for PGP key

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00241" HREF="msg00241.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
<UL><LI><EM>From:</EM> "Theodore Ts'o" &lt;tytso@MIT.EDU&gt;</LI></UL></LI>
<LI><STRONG><A NAME="00262" HREF="msg00262.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
<UL><LI><EM>From:</EM> shields@tembel.org (Michael Shields)</LI></UL></LI>
<LI><STRONG><A NAME="00250" HREF="msg00250.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
<UL><LI><EM>From:</EM> Scott Brickner &lt;sjb@universe.digex.net&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00223.html">Re: payee anonymity</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00224.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00219.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00241.html">Re: /dev/random for FreeBSD [was: Re: /dev/random for Linux]</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00261"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00261"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
