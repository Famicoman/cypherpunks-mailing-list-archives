<!-- MHonArc v2.4.3 -->
<!--X-Subject: RFC&#45;822 header processing in perl -->
<!--X-From-R13: revpNcnenyynk.pbz (Sevp [rffvpx) -->
<!--X-Date: Tue, 5 Jan 93 01:01:56 PST -->
<!--X-Message-Id: 9301050049.AA07963@parallax.com -->
<!--X-Content-Type: text/plain -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>RFC-822 header processing in perl</TITLE>
<LINK REV="made" HREF="mailto:eric@parallax.com">
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00020.html">Date Prev</A>][<A HREF="msg00023.html">Date Next</A>][<A HREF="msg00020.html">Thread Prev</A>][<A HREF="msg00023.html">Thread Next</A>][<A HREF="index.html#00018">Date Index</A>][<A HREF="threads.html#00018">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>RFC-822 header processing in perl</H1>
<HR>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<UL>
<LI><em>To</em>: <A HREF="mailto:cypherpunks@toad.com">cypherpunks@toad.com</A></LI>
<LI><em>Subject</em>: RFC-822 header processing in perl</LI>
<LI><em>From</em>: <A HREF="mailto:eric@parallax.com">eric@parallax.com</A> (Eric Messick)</LI>
<LI><em>Date</em>: Mon, 4 Jan 93 16:49:32 PST</LI>
</UL>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>

I've written a perl script to parse RFC-822 style headers.  It was a
good deal harder than I had thought it would be.  Since it's over 300
lines (with comments) I won't post it, but will mail it to anyone who
wants to play with it.  It has the following features:

Doesn't touch anything unless you ask it to.  Leaves the ordering and
whitespace/folding of header lines unchanged.

Allows you to replace any header line (which appears only once) with
an arbitrary value, which is appropriatly folded on output.

Allows you to delete any header line, or add a header line to the end
of the header.  These are special cases of replacing a header line.

Allows you to access the value (stuff after the :) of any header line.

Given a list of addresses, returns an array of canonicalized addresses.

The last item is the hard part.  It correctly parses the sample
addresses in the RFC-822 paper, as well as some really gnarly looking
junk that I threw at it.  It correctly handles the various types of
quoted strings, and backslash quoting, not splitting addresses at
quoted commas.  It removes nested comments from addresses.  It deletes
the group name from a list of addresses without screwing up quoted
colons.

It should be useful as a first step in alias processing.  That's what
I'll be adding next, when I figure out exactly how I want to do it.

-- eric messick
eric@toad.com

</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<UL><LI><STRONG>Follow-Ups</STRONG>:
<UL>
<LI><STRONG><A NAME="00023" HREF="msg00023.html">purloined letter</A></STRONG>
<UL><LI><EM>From:</EM> Peter Breton &lt;pbreton@cs.umb.edu&gt;</LI></UL></LI>
</UL></LI></UL>
<!--X-Follow-Ups-End-->
<!--X-References-->
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00020.html">Re: Remail addresses...</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00023.html">purloined letter</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00020.html">Re: Remail addresses...</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00023.html">purloined letter</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00018"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00018"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
