<!-- MHonArc v2.4.3 -->
<!--X-Subject: Multiprecision integer mult using FPU -->
<!--X-From-R13: Sevp Pybffbz <roNpbzfrp.pbz> -->
<!--X-Date: Fri, 12 Aug 94 18:00:10 PDT -->
<!--X-Message-Id: 199408122359.QAA04429@modmult.comsec.com -->
<!--X-Content-Type: text/plain -->
<!--X-Reference: 199408120554.WAA21416@netcom.netcom.com -->
<!--X-Head-End-->
<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML//EN">
<HTML>
<HEAD>
<TITLE>Multiprecision integer mult using FPU</TITLE>
<LINK REV="made" HREF="mailto:eb@comsec.com">
</HEAD>
<BODY>
<!--X-Body-Begin-->
<!--X-User-Header-->
<!--X-User-Header-End-->
<!--X-TopPNI-->
<HR>
[<A HREF="msg00608.html">Date Prev</A>][<A HREF="msg00615.html">Date Next</A>][<A HREF="msg00568.html">Thread Prev</A>][<A HREF="msg00607.html">Thread Next</A>][<A HREF="index.html#00606">Date Index</A>][<A HREF="threads.html#00606">Thread Index</A>]
<!--X-TopPNI-End-->
<!--X-MsgBody-->
<!--X-Subject-Header-Begin-->
<H1>Multiprecision integer mult using FPU</H1>
<HR>
<!--X-Subject-Header-End-->
<!--X-Head-of-Message-->
<UL>
<LI><em>To</em>: <A HREF="mailto:norm@netcom.com">norm@netcom.com</A></LI>
<LI><em>Subject</em>: Multiprecision integer mult using FPU</LI>
<LI><em>From</em>: Eric Blossom &lt;<A HREF="mailto:eb@comsec.com">eb@comsec.com</A>&gt;</LI>
<LI><em>Date</em>: Fri, 12 Aug 1994 16:59:02 -0700</LI>
<LI><em>Cc</em>: <A HREF="mailto:darklord%2B@CMU.EDU">darklord+@CMU.EDU</A>, <A HREF="mailto:cypherpunks@toad.com">cypherpunks@toad.com</A>, <A HREF="mailto:antonio@qualcomm.com">antonio@qualcomm.com</A>,       <A HREF="mailto:smiller@qualcomm.com">smiller@qualcomm.com</A></LI>
<LI><em>In-Reply-To</em>: Norman Hardy's message of Thu, 11 Aug 1994 22:54:02 -0700 &lt;<A HREF="msg00568.html">199408120554.WAA21416@netcom.netcom.com</A>&gt;</LI>
<LI><em>Sender</em>: <A HREF="mailto:owner%2Dcypherpunks@toad.com">owner-cypherpunks@toad.com</A></LI>
</UL>
<!--X-Head-of-Message-End-->
<!--X-Head-Body-Sep-Begin-->
<HR>
<!--X-Head-Body-Sep-End-->
<!--X-Body-of-Message-->
<PRE>
Norm Hardy writes:
&gt; The PowerPC floating point is even more impressive. The fmadd instruction
&gt; can do "a &lt;- b*c+d" every other clock or 30 per microsecond on the low end
&gt; Power Mac. If we store 24 bits of a multiple precision number in successive
&gt; elements of an arrary then the inner loop of a multiply is a routine such
&gt; as:
&gt;
&gt; void m8(float * a, float * b, double * p)
&gt; {p[0] = a[0]*b[0];
&gt; p[1] = a[0]*b[1] + a[1]*b[0];
&gt; p[2] = a[0]*b[2] + a[1]*b[1] + a[2]*b[0];
&gt; p[3] = a[0]*b[3] + a[1]*b[2] + a[2]*b[1] + a[3]*b[0];
&gt; p[4] = a[0]*b[4] + a[1]*b[3] + a[2]*b[2] + a[3]*b[1] + a[4]*b[0];
&gt; p[5] = a[0]*b[5] + a[1]*b[4] + a[2]*b[3] + a[3]*b[2] + a[4]*b[1] + a[5]*b[0];
&gt; ....
&gt; p[13] = a[6]*b[7] + a[7]*b[6];
&gt; p[14] = a[7]*b[7];}

Nice hack Norm.

This would appear to apply to any processor where the floating point
performance is substantially greater than the integer.  This is true
of the Pentium too.

Floating point:
		latency/throughput
	FADD	3/1
	FMUL	3/1

	FLD	1/1
	FST	2/2	1/1 if storing to FPU stack

Integer:
	ADD	1
	MUL	10


</PRE>

<!--X-Body-of-Message-End-->
<!--X-MsgBody-End-->
<!--X-Follow-Ups-->
<HR>
<!--X-Follow-Ups-End-->
<!--X-References-->
<UL><LI><STRONG>References</STRONG>:
<UL>
<LI><STRONG><A NAME="00568" HREF="msg00568.html">Re: IDEA vs DES</A></STRONG>
<UL><LI><EM>From:</EM> norm@netcom.com (Norman Hardy)</LI></UL></LI>
</UL></LI></UL>
<!--X-References-End-->
<!--X-BotPNI-->
<UL>
<LI>Prev by Date:
<STRONG><A HREF="msg00608.html">Re: Bug in PgP2.6???</A></STRONG>
</LI>
<LI>Next by Date:
<STRONG><A HREF="msg00615.html">No Subject</A></STRONG>
</LI>
<LI>Prev by thread:
<STRONG><A HREF="msg00568.html">Re: IDEA vs DES</A></STRONG>
</LI>
<LI>Next by thread:
<STRONG><A HREF="msg00607.html">Re: IDEA vs DES</A></STRONG>
</LI>
<LI>Index(es):
<UL>
<LI><A HREF="index.html#00606"><STRONG>Date</STRONG></A></LI>
<LI><A HREF="threads.html#00606"><STRONG>Thread</STRONG></A></LI>
</UL>
</LI>
</UL>

<!--X-BotPNI-End-->
<!--X-User-Footer-->
<!--X-User-Footer-End-->
</BODY>
</HTML>
